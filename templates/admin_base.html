<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم - {{ title or '' }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        body { font-family: 'Tajawal', Arial, sans-serif; background: #f4f6fa; }
        .sidebar {
            position: fixed;
            top: 0; right: 0; bottom: 0;
            width: 220px;
            background: linear-gradient(180deg, #0ea47a 0%, #1cb5e0 100%);
            color: #fff;
            box-shadow: -2px 0 8px #e0e0e0;
            z-index: 1000;
            padding-top: 30px;
            transition: right 0.3s;
        }
        .sidebar .logo {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            letter-spacing: 1px;
        }
        .sidebar .nav-link {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            border-radius: 8px 0 0 8px;
            padding: 10px 18px 10px 10px;
            transition: background 0.15s;
        }
        .sidebar .nav-link.active, .sidebar .nav-link:hover {
            background: #ffe082;
            color: #0ea47a !important;
            font-weight: bold;
        }
        .sidebar .nav-link i {
            margin-left: 10px;
            font-size: 1.2em;
        }
        .sidebar .logout-btn {
            margin-top: 30px;
            background: #e74c3c;
            color: #fff;
            border: none;
            width: 90%;
            border-radius: 8px;
            padding: 10px;
            font-weight: bold;
            transition: background 0.15s;
        }
        .sidebar .logout-btn:hover {
            background: #c0392b;
        }
        .main-content {
            margin-right: 240px;
            padding: 40px 30px 30px 30px;
        }
        /* زر القائمة للموبايل */
        .sidebar-toggle-btn {
            display: none;
            position: fixed;
            top: 16px;
            right: 16px;
            z-index: 2001;
            background: #0ea47a;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 2rem;
            width: 48px;
            height: 48px;
            box-shadow: 0 2px 8px #b2dfdb55;
        }
        @media (max-width: 900px) {
            .sidebar { width: 80px; padding-top: 6px; }
            .sidebar .logo { font-size: 0.9rem; margin-bottom: 6px; }
            .sidebar .nav-link { font-size: 0.8rem; padding: 6px 6px; }
            .main-content { margin-right: 90px; padding: 10px 2vw; }
        }
        @media (max-width: 600px) {
            .sidebar { display: block; right: -260px; width: 220px; padding-top: 30px; }
            .sidebar.sidebar-open { right: 0; box-shadow: -2px 0 16px #1cb5e099; }
            .main-content { margin-right: 0; padding: 6px 1vw; }
            .sidebar-toggle-btn { display: block; }
            .sidebar .logo { font-size: 1.2rem; margin-bottom: 18px; }
            .sidebar .nav-link { font-size: 1.1rem; padding: 12px 18px; }
            .sidebar .logout-btn { font-size: 1rem; }
            body.sidebar-overlay { overflow: hidden; }
            /* خلفية شفافة عند فتح القائمة */
            .sidebar-backdrop {
                display: block;
                position: fixed;
                top: 0; right: 0; left: 0; bottom: 0;
                background: rgba(0,0,0,0.25);
                z-index: 2000;
            }
        }
        @media (max-width: 400px) {
            .main-content { padding: 2px 0.5vw; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <button class="sidebar-toggle-btn" id="sidebarToggleBtn" aria-label="فتح القائمة"><i class="fa fa-bars"></i></button>
    <div class="sidebar" id="sidebarMenu">
        <div class="logo">
            <i class="fa-solid fa-crown"></i> لوحة التحكم
        </div>
        <a href="/admin/products" class="nav-link {% if request.path.startswith('/admin/products') %}active{% endif %}"><i class="fa-solid fa-box"></i> المنتجات</a>
        <a href="/admin/banner" class="nav-link {% if request.path.startswith('/admin/banner') %}active{% endif %}"><i class="fa-solid fa-image"></i> البنر</a>
        <a href="/admin/site-info" class="nav-link {% if request.path.startswith('/admin/site-info') %}active{% endif %}"><i class="fa-solid fa-info-circle"></i> معلومات الموقع</a>
        <a href="/admin/google-sheets" class="nav-link {% if request.path.startswith('/admin/google-sheets') %}active{% endif %}"><i class="fa-brands fa-google-drive"></i> Google Sheets</a>
        <a href="/" class="nav-link"><i class="fa-solid fa-store"></i> العودة للمتجر</a>
        <form action="/admin/logout" method="get">
            <button type="submit" class="logout-btn"><i class="fa-solid fa-sign-out-alt"></i> تسجيل الخروج</button>
        </form>
    </div>
    <div class="main-content">
        {% block content %}{% endblock %}
    </div>
    <div class="sidebar-backdrop" id="sidebarBackdrop" style="display:none;"></div>
    <script>
    // من أجل القائمة الجانبية في الموبايل
    const sidebar = document.getElementById('sidebarMenu');
    const toggleBtn = document.getElementById('sidebarToggleBtn');
    const backdrop = document.getElementById('sidebarBackdrop');
    function openSidebar() {
        sidebar.classList.add('sidebar-open');
        backdrop.style.display = 'block';
        document.body.classList.add('sidebar-overlay');
    }
    function closeSidebar() {
        sidebar.classList.remove('sidebar-open');
        backdrop.style.display = 'none';
        document.body.classList.remove('sidebar-overlay');
    }
    toggleBtn.onclick = openSidebar;
    backdrop.onclick = closeSidebar;
    // إغلاق القائمة عند تغيير حجم الشاشة
    window.addEventListener('resize', function() {
        if(window.innerWidth > 600) closeSidebar();
    });
    </script>
</body>
</html> 